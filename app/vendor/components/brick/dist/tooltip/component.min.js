!function(){function t(t){return t in N}function e(t){if(t.getBoundingClientRect){var n=document.documentElement.scrollLeft||document.body.scrollLeft||0;return t.getBoundingClientRect().left+n}return t.offsetParent?e(t.offsetParent)+t.offsetLeft:t.offsetLeft}function n(t){if(t.getBoundingClientRect){var e=document.documentElement.scrollTop||document.body.scrollTop||0;return t.getBoundingClientRect().top+e}return t.offsetParent?n(t.offsetParent)+t.offsetTop:t.offsetTop}function r(t){var r={top:n(t),left:e(t),width:t.offsetWidth,height:t.offsetHeight};return r.right=r.left+r.width,r.bottom=r.top+r.height,r}function i(t,e,n){this.eventType=e,this.listenerFn=n,this.elem=t,this._attachedFn=null}function o(t){this._cachedListener=null,this._tooltips=[];var e=this,n=function(t){e._tooltips.forEach(function(e){e.hasAttribute("visible")&&!e.hasAttribute("ignore-outer-trigger")&&(d(t.target,e)||A(e))})};this._cachedListener=new i(document,t,n),this._cachedListener.attachListener()}function a(){this.eventStructDict={}}function s(t,e,n){var r=function(e){n&&d(e.target,t.previousElementSibling)&&n.call(t.previousElementSibling,e)};return new i(document.documentElement,e,r)}function u(t,e,n){var r=e+":delegate(x-tooltip+*)",o=function(e){n&&this===t.nextElementSibling&&n.call(this,e)};return new i(document.documentElement,r,o)}function l(t,e,n,r){if("_previousSibling"===e)return s(t,n,r);if("_nextSibling"===e)return u(t,n,r);var o=n+":delegate("+e+")";return new i(document.documentElement,o,function(e){var n=this;d(n,t)||r.call(n,e)})}function c(t,e,n){var r=[],i=function(){var e=this;t.hasAttribute("visible")&&e===t.xtag.lastTargetElem?A(t):w(t,e)},o=l(t,e,n,i);return r.push(o),r}function d(t,e){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function h(t){return function(e){var n=this,r=e.relatedTarget||e.toElement;r?d(r,n)||t.call(this,e):t.call(this,e)}}function f(t,e){var n=[];n="_previousSibling"===e?t.previousElementSibling?[t.previousElementSibling]:[]:"_nextSibling"===e?t.nextElementSibling?[t.nextElementSibling]:[]:xtag.query(document,e);for(var r=0;r<n.length;){var i=n[r];d(i,t)?n.splice(r,1):r++}return n}function g(t,e){var n=function(t,e,n){return n.left<=t&&t<=n.right&&n.top<=e&&e<=n.bottom},i=r(t),o=r(e),a={left:i.left,top:i.top,right:i.left+t.offsetWidth,bottom:i.top+t.offsetHeight},s={left:o.left,top:o.top,right:o.left+e.offsetWidth,bottom:o.top+e.offsetHeight},u=function(t,e){return n(t.left,t.top,e)||n(t.right,t.top,e)||n(t.right,t.bottom,e)||n(t.left,t.bottom,e)},l=function(t,e){return t.top<=e.top&&e.bottom<=t.bottom&&e.left<=t.left&&t.right<=e.right};return u(a,s)||u(s,a)||l(a,s)||l(s,a)}function p(t,e,n){var r=n*(Math.PI/180),i=t*Math.sin(r)+e*Math.cos(r),o=t*Math.cos(r)+e*Math.sin(r);return{height:i,width:o}}function v(t,e,n){var r=t;return r=void 0!==e?Math.max(e,r):r,r=void 0!==n?Math.min(n,r):r}function m(t,e){for(var n=t.parentNode,r=n.scrollWidth,i=n.scrollHeight,o=[],a=[],s=0;s<e.length;s++){var u=e[s],l=u.rect;l.left<0||l.top<0||l.right>r||l.bottom>i?a.push(u):o.push(u)}var c=o.length>0?o:a;return c.length>0?c[0].orient:null}function b(t,e){var n=r(t),i=r(e),o={top:n.top-i.top,left:n.left-i.left};return e!==document.body&&d(e,document.body)&&(o.top+=e.scrollTop,o.left+=e.scrollLeft),o}function x(t){t.setAttribute("_force-display",!0)}function y(t){t.removeAttribute("_force-display")}function E(e,n){var r=e.xtag.arrowEl,i=[];for(var o in N){r.setAttribute("arrow-direction",N[o]);var a=_(e,n,o);a&&(x(e),g(e,n)||i.push({orient:o,rect:a}),y(e))}var s=m(e,i);return e.setAttribute("_auto-orientation",s),r.setAttribute("arrow-direction",N[s]),t(s)&&s!==o?_(e,n,s):a}function _(e,n,r,i){if(!e.parentNode)return e.left="",e.top="",null;i=void 0===i?0:i;var o=e.xtag.arrowEl;if(!t(r))return E(e,n);var a=e.offsetParent?e.offsetParent:e.parentNode;i||(e.style.top="",e.style.left="",o.style.top="",o.style.left="");var s=b(n,a),u=a.scrollWidth,l=a.scrollHeight,c=n.offsetWidth,d=n.offsetHeight;x(e);var h=e.offsetWidth,f=e.offsetHeight,g=o.offsetWidth,m=o.offsetHeight,w=45,A=p(g,m,w);g=A.width,m=A.height;var T,C,S,k,N={left:s.left+(c-h)/2,top:s.top+(d-f)/2},L=function(t,e){return{left:(c-g)/2+s.left-e,top:(d-m)/2+s.top-T}};if("top"===r)m/=2,T=s.top-f-m,C=N.left,S=l-f-m,k=u-h;else if("bottom"===r)m/=2,T=s.top+d+m,C=N.left,S=l-f,k=u-h;else if("left"===r)g/=2,T=N.top,C=s.left-h-g,S=l-f,k=u-h-g;else{if("right"!==r)throw"invalid orientation "+r;g/=2,T=N.top,C=s.left+c+g,S=l-f,k=u-h}e.noOverflow&&(T=v(T,0,S),C=v(C,0,k)),e.style.top=T+"px",e.style.left=C+"px";var O=L(T,C);"top"===r||"bottom"===r?o.style.left=v(O.left,0,h-g)+"px":o.style.top=v(O.top,0,f-m)+"px";var M=e.offsetWidth,D=e.offsetHeight;y(e);var I=0;return I>i&&(h!==e.offsetWidth||f!==e.offsetHeight)?_(e,n,r,i+1):{left:C,top:T,width:M,height:D,right:C+M,bottom:T+D}}function w(t,e){e===t&&console.log("The tooltip's target element is the tooltip itself! Is this intentional?");var n=t.xtag.arrowEl,r=t.orientation,i=function(){y(t),t.setAttribute("visible",!0),xtag.fireEvent(t,"tooltipshown",{triggerElem:e})};e?xtag.skipTransition(t,function(){return _(t,e,r),t.xtag.lastTargetElem=e,i},this):(t.style.top="",t.style.left="",n.style.top="",n.style.left="",i())}function A(e){t(e.orientation)&&e.removeAttribute("_auto-orientation"),e.hasAttribute("visible")&&xtag.skipTransition(e,function(){return x(e),e.xtag._hideTransitionFlag=!0,function(){e.removeAttribute("visible")}})}function T(t){var e=t.xtag.cachedListeners;e.forEach(function(t){t.removeListener()}),t.xtag.cachedListeners=[],S.unregisterTooltip(t.triggerStyle,t)}function C(t,e,n){if(t.parentNode){(void 0===e||null===e)&&(e=t.targetSelector),(void 0===n||null===n)&&(n=t.triggerStyle);var r=f(t,e);-1===r.indexOf(t.xtag.lastTargetElem)&&(t.xtag.lastTargetElem=r.length>0?r[0]:null,_(t,t.xtag.lastTargetElem,t.orientation)),T(t);var i;if(n in k){var o=k[n];i=o(t,e)}else i=c(t,e,n),S.registerTooltip(n,t);i.forEach(function(t){t.attachListener()}),t.xtag.cachedListeners=i,A(t)}}var S,k,N={top:"down",bottom:"up",left:"right",right:"left"};i.prototype.attachListener=function(){this._attachedFn||(this._attachedFn=xtag.addEvent(this.elem,this.eventType,this.listenerFn))},i.prototype.removeListener=function(){this._attachedFn&&(xtag.removeEvent(this.elem,this.eventType,this._attachedFn),this._attachedFn=null)},o.prototype.destroy=function(){this._cachedListener.removeListener(),this._cachedListener=null,this._tooltips=null},o.prototype.containsTooltip=function(t){return-1!==this._tooltips.indexOf(t)},o.prototype.addTooltip=function(t){this.containsTooltip(t)||this._tooltips.push(t)},o.prototype.removeTooltip=function(t){this.containsTooltip(t)&&this._tooltips.splice(this._tooltips.indexOf(t),1)},Object.defineProperties(o.prototype,{numTooltips:{get:function(){return this._tooltips.length}}}),a.prototype.registerTooltip=function(t,e){if(t in this.eventStructDict){var n=this.eventStructDict[t];n.containsTooltip(e)||n.addTooltip(e)}else this.eventStructDict[t]=new o(t),this.eventStructDict[t].addTooltip(e)},a.prototype.unregisterTooltip=function(t,e){if(t in this.eventStructDict&&this.eventStructDict[t].containsTooltip(e)){var n=this.eventStructDict[t];n.removeTooltip(e),0===n.numTooltips&&(n.destroy(),delete this.eventStructDict[t])}},S=new a,k={none:function(){return[]},hover:function(t,e){var n=[],r=null,o=200,a=function(){r&&window.clearTimeout(r),r=null},s=h(function(e){a();var n=this,r=e.relatedTarget||e.toElement;d(r,t)||w(t,n)}),u=h(function(e){a();var n=e.relatedTarget||e.toElement;d(n,t)||(r=window.setTimeout(function(){"hover"===t.triggerStyle&&A(t)},o))}),c=l(t,e,"tapenter",s),f=l(t,e,"tapleave",u);n.push(c),n.push(f);var g=h(function(e){a();var n=e.relatedTarget||e.toElement,r=t.xtag.lastTargetElem;t.hasAttribute("visible")||!r||d(n,r)||w(t,r)}),p=h(function(e){a();var n=e.relatedTarget||e.toElement,i=t.xtag.lastTargetElem;i&&!d(n,i)&&(r=window.setTimeout(function(){"hover"===t.triggerStyle&&A(t)},o))});return n.push(new i(t,"tapenter",g)),n.push(new i(t,"tapleave",p)),n}},xtag.register("x-tooltip",{lifecycle:{created:function(){this.xtag.contentEl=document.createElement("div"),this.xtag.arrowEl=document.createElement("span"),xtag.addClass(this.xtag.contentEl,"tooltip-content"),xtag.addClass(this.xtag.arrowEl,"tooltip-arrow"),this.xtag.contentEl.innerHTML=this.innerHTML,this.innerHTML="",this.appendChild(this.xtag.contentEl),this.appendChild(this.xtag.arrowEl),this.xtag._orientation="auto",this.xtag._targetSelector="_previousSibling",this.xtag._triggerStyle="hover";var t=f(this,this.xtag._targetSelector);this.xtag.lastTargetElem=t.length>0?t[0]:null,this.xtag.cachedListeners=[],this.xtag._hideTransitionFlag=!1},inserted:function(){C(this,this.xtag._targetSelector,this.xtag._triggerStyle)},removed:function(){T(this)}},events:{transitionend:function(t){var e=t.currentTarget;e.xtag._hideTransitionFlag&&!e.hasAttribute("visible")&&(e.xtag._hideTransitionFlag=!1,xtag.fireEvent(e,"tooltiphidden")),y(e)}},accessors:{orientation:{attribute:{},get:function(){return this.xtag._orientation},set:function(e){e=e.toLowerCase();var n=this.querySelector(".tooltip-arrow"),r=null;t(e)?(r=N[e],n.setAttribute("arrow-direction",r),this.removeAttribute("_auto-orientation")):n.removeAttribute("arrow-direction"),this.xtag._orientation=e,this.refreshPosition()}},triggerStyle:{attribute:{name:"trigger-style"},get:function(){return this.xtag._triggerStyle},set:function(t){C(this,this.targetSelector,t),this.xtag._triggerStyle=t}},targetSelector:{attribute:{name:"target-selector"},get:function(){return this.xtag._targetSelector},set:function(t){f(this,t),C(this,t,this.triggerStyle),this.xtag._targetSelector=t}},ignoreOuterTrigger:{attribute:{"boolean":!0,name:"ignore-outer-trigger"}},ignoreTooltipPointerEvents:{attribute:{"boolean":!0,name:"ignore-tooltip-pointer-events"}},noOverflow:{attribute:{"boolean":!0,name:"no-overflow"},set:function(){this.refreshPosition()}},contentEl:{get:function(){return this.xtag.contentEl},set:function(t){var e=this.xtag.contentEl;xtag.addClass(t,"tooltip-content"),this.replaceChild(t,e),this.xtag.contentEl=t,this.refreshPosition()}},presetTriggerStyles:{get:function(){var t=[];for(var e in k)t.push(e);return t}},targetElems:{get:function(){return f(this,this.targetSelector)}}},methods:{refreshPosition:function(){this.xtag.lastTargetElem&&_(this,this.xtag.lastTargetElem,this.orientation)},show:function(){w(this,this.xtag.lastTargetElem)},hide:function(){A(this)},toggle:function(){this.hasAttribute("visible")?this.hide():this.show()}}})}();