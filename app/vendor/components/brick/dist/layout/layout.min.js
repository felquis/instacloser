!function(){function t(t){var e=t.firstElementChild;if(!e)return{header:null,section:null,footer:null};var n=e.nextElementSibling;return{header:"HEADER"==e.nodeName?e:null,section:"SECTION"==e.nodeName?e:n&&"SECTION"==n.nodeName?n:null,footer:"FOOTER"==t.lastElementChild.nodeName?t.lastElementChild:null}}function e(t,e){var n=e.__layoutScroll__=e.__layoutScroll__||Object.defineProperty(e,"__layoutScroll__",{value:{last:e.scrollTop}}).__layoutScroll__,r=e.scrollTop,i=t.scrollBuffer;return n.max=n.max||Math.max(r+i,i),n.min=n.min||Math.max(r-i,i),n}function n(t,e){t.setAttribute("content-maximizing",null),e.section&&(e.header&&(e.section.style.marginTop="-"+e.header.getBoundingClientRect().height+"px"),e.footer&&(e.section.style.marginBottom="-"+e.footer.getBoundingClientRect().height+"px"))}function r(t,e){t.removeAttribute("content-maximized"),t.removeAttribute("content-maximizing"),e.section&&(e.section.style.marginTop="",e.section.style.marginBottom="")}function i(i){if(!i.currentTarget.hasAttribute("content-maximizing")){var a=i.target,o=i.currentTarget;if(this.scrollhide&&(a.parentNode==o||xtag.matchSelector(a,o.scrollTarget))){var s=a.scrollTop,u=o.scrollBuffer,c=t(o),l=e(o,a);s>l.last?l.min=Math.max(s-u,u):s<l.last&&(l.max=Math.max(s+u,u)),o.maxcontent||(s>l.max&&!o.hasAttribute("content-maximized")?n(o,c):s<l.min&&r(o,c)),l.last=s}}}xtag.register("x-layout",{lifecycle:{created:function(){}},events:{scroll:i,transitionend:function(e){var n=t(this);!this.hasAttribute("content-maximizing")||e.target!=n.header&&e.target!=n.section&&e.target!=n.footer||(this.setAttribute("content-maximized",null),this.removeAttribute("content-maximizing"))},"tap:delegate(section)":function(e){var i=e.currentTarget;if(i.taphide&&this.parentNode==i){var a=t(i);i.hasAttribute("content-maximizing")||i.hasAttribute("content-maximized")?i.maxcontent||r(i,a):n(i,a)}},"mouseover:delegate(section)":function(e){var r=e.currentTarget;!r.hoverhide||this.parentNode!=r||r.hasAttribute("content-maximized")||r.hasAttribute("content-maximizing")||e.relatedTarget&&!this.contains(e.target)||n(r,t(r))},"mouseout:delegate(section)":function(e){var n=e.currentTarget;!n.hoverhide||this.parentNode!=n||!n.hasAttribute("content-maximized")&&!n.hasAttribute("content-maximizing")||n!=e.relatedTarget&&n.contains(e.relatedTarget)||r(n,t(n))}},accessors:{scrollTarget:{attribute:{name:"scroll-target"}},scrollBuffer:{attribute:{name:"scroll-buffer"},get:function(){return Number(this.getAttribute("scroll-buffer"))||30}},taphide:{attribute:{"boolean":!0}},hoverhide:{attribute:{"boolean":!0}},scrollhide:{attribute:{"boolean":!0}},maxcontent:{attribute:{"boolean":!0},set:function(e){var i=t(this);e?n(this,i):this.hasAttribute("content-maximizing")||r(this,i)}}}})}();