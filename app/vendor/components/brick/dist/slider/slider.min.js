!function(){function t(t){return!isNaN(parseFloat(t))}function e(e,n){return e.hasAttribute(n)&&t(e.getAttribute(n))}function n(e,n,r,i){if(i=i?i:Math.round,r=t(r)?r:0,!t(e))throw"invalid value "+e;if(!t(n)||0>=+n)throw"invalid step "+n;return i((e-r)/n)*n+r}function r(t,e,r,i){return e>t?e:t>r?Math.max(e,n(r,i,e,Math.floor)):t}function i(t,e,i){var a=n((e-t)/2+t,i,t);return r(a,t,e,i)}function a(t,e){var n=t.min,r=t.max;return(e-n)/(r-n)}function o(t,e){var n=t.min,r=t.max;return(r-n)*e+n}function s(t,e){e=Math.min(Math.max(0,e),1);var i=o(t,e),a=n(i,t.step,t.min);return r(a,t.min,t.max,t.step)}function u(t,e){var n=t.xtag.polyFillSliderThumb;if(n){var r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=a(t,e),s=Math.max(r.width-i.width,0),u=s*o,l=u/r.width;n.style.left=100*l+"%"}}function l(t){u(t,t.value)}function c(t,e){var n=t.xtag.rangeInputEl,r=n.getBoundingClientRect(),i=e-r.left;t.value;var a=s(t,i/r.width);t.value=a,xtag.fireEvent(t,"input"),l(t)}function d(t,e,n){t.xtag.dragInitVal=t.value,c(t,e,n);var r=t.xtag.callbackFns;document.body.addEventListener("mousemove",r.onMouseDragMove),document.body.addEventListener("touchmove",r.onTouchDragMove),document.body.addEventListener("mouseup",r.onDragEnd),document.body.addEventListener("touchend",r.onDragEnd);var i=t.xtag.polyFillSliderThumb;i&&i.setAttribute("active",!0)}function h(t,e,n){c(t,e,n)}function f(t){return{onMouseDragStart:function(e){e.button===p&&(d(t,e.pageX,e.pageY),e.preventDefault())},onTouchDragStart:function(e){var n=e.targetTouches;1===n.length&&(d(t,n[0].pageX,n[0].pageY),e.preventDefault())},onMouseDragMove:function(e){h(t,e.pageX,e.pageY),e.preventDefault()},onTouchDragMove:function(e){var n=e.targetTouches;1===n.length&&(h(t,n[0].pageX,n[0].pageY),e.preventDefault())},onDragEnd:function(e){var n=t.xtag.callbackFns;document.body.removeEventListener("mousemove",n.onMouseDragMove),document.body.removeEventListener("touchmove",n.onTouchDragMove),document.body.removeEventListener("mouseup",n.onDragEnd),document.body.removeEventListener("touchend",n.onDragEnd);var r=t.xtag.polyFillSliderThumb;r&&r.removeAttribute("active"),t.value!==t.xtag.dragInitVal&&xtag.fireEvent(t,"change"),t.xtag.dragInitVal=null,e.preventDefault()},onKeyDown:function(t){var e=t.keyCode;if(e in g){var n=this.value,r=this.min,i=this.max,a=this.step,o=Math.max(0,i-r),s=Math.max(o/10,a);switch(g[e]){case"LEFT_ARROW":case"DOWN_ARROW":this.value=Math.max(n-a,r);break;case"RIGHT_ARROW":case"UP_ARROW":this.value=Math.min(n+a,i);break;case"HOME":this.value=r;break;case"END":this.value=i;break;case"PAGE_DOWN":this.value=Math.max(n-s,r);break;case"PAGE_UP":this.value=Math.min(n+s,i)}this.value!==n&&xtag.fireEvent(this,"change"),t.preventDefault()}}}}var g={33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW"},p=0;xtag.register("x-slider",{lifecycle:{created:function(){this.xtag.callbackFns=f(this),this.xtag.dragInitVal=null;var t=document.createElement("input");xtag.addClass(t,"input"),t.setAttribute("type","range");var n=e(this,"max")?+this.getAttribute("max"):100,r=e(this,"min")?+this.getAttribute("min"):0,a=e(this,"step")?+this.getAttribute("step"):1;a=a>0?a:1;var o=e(this,"value")?+this.getAttribute("value"):i(r,n,a);t.setAttribute("max",n),t.setAttribute("min",r),t.setAttribute("step",a),t.setAttribute("value",o),this.xtag.rangeInputEl=t,this.appendChild(this.xtag.rangeInputEl),this.xtag.polyFillSliderThumb=null,"range"!==t.type||this.hasAttribute("polyfill")?this.setAttribute("polyfill",!0):this.removeAttribute("polyfill"),l(this)},attributeChanged:function(){l(this)}},events:{"change:delegate(input[type=range])":function(t){t.stopPropagation(),xtag.fireEvent(t.currentTarget,"change")},"input:delegate(input[type=range])":function(t){t.stopPropagation(),xtag.fireEvent(t.currentTarget,"input")},"focus:delegate(input[type=range])":function(t){var e=t.currentTarget;xtag.fireEvent(e,"focus",{},{bubbles:!1})},"blur:delegate(input[type=range])":function(t){var e=t.currentTarget;xtag.fireEvent(e,"blur",{},{bubbles:!1})}},accessors:{polyfill:{attribute:{"boolean":!0},set:function(t){var e=this.xtag.callbackFns;if(t){if(this.setAttribute("tabindex",0),this.xtag.rangeInputEl.setAttribute("tabindex",-1),this.xtag.rangeInputEl.setAttribute("readonly",!0),!this.xtag.polyFillSliderThumb){var n=document.createElement("span");xtag.addClass(n,"slider-thumb"),this.xtag.polyFillSliderThumb=n,this.appendChild(n)}l(this),this.addEventListener("mousedown",e.onMouseDragStart),this.addEventListener("touchstart",e.onTouchDragStart),this.addEventListener("keydown",e.onKeyDown)}else this.removeAttribute("tabindex"),this.xtag.rangeInputEl.removeAttribute("tabindex"),this.xtag.rangeInputEl.removeAttribute("readonly"),this.removeEventListener("mousedown",e.onMouseDragStart),this.removeEventListener("touchstart",e.onTouchDragStart),this.removeEventListener("keydown",e.onKeyDown)}},max:{attribute:{selector:"input[type=range]"},get:function(){return+this.xtag.rangeInputEl.getAttribute("max")}},min:{attribute:{selector:"input[type=range]"},get:function(){return+this.xtag.rangeInputEl.getAttribute("min")}},step:{attribute:{selector:"input[type=range]"},get:function(){return+this.xtag.rangeInputEl.getAttribute("step")}},name:{attribute:{selector:"input[type=range]"},set:function(t){var e=this.xtag.rangeInputEl;null===t||void 0===t?e.removeAttribute("name"):e.setAttribute("name",t)}},value:{attribute:{selector:"input[type=range]"},get:function(){return+this.xtag.rangeInputEl.value},set:function(e){t(e)||(e=i(this.min,this.max,this.step)),e=+e;var a=this.min,o=this.max,s=this.step,u=n(e,s,a),c=r(u,a,o,s);this.xtag.rangeInputEl.value=c,l(this)}},inputElem:{get:function(){return this.xtag.rangeInputEl}}},methods:{}})}();