!function(){function t(t){return t in N}function e(t){var e=t.getBoundingClientRect(),n=document.documentElement,r=n.scrollTop||document.body.scrollTop||0,i=n.scrollLeft||document.body.scrollLeft||0;return{left:e.left+i,right:e.right+i,top:e.top+r,bottom:e.bottom+r,width:e.width,height:e.height}}function n(t,n){var n=void 0!==n?n:e(t);return{x:t.offsetWidth?n.width/t.offsetWidth:1,y:t.offsetHeight?n.height/t.offsetHeight:1}}function r(t,e,n){this.eventType=e,this.listenerFn=n,this.elem=t,this._attachedFn=null}function i(t){this._cachedListener=null,this._tooltips=[];var e=this,n=function(t){e._tooltips.forEach(function(e){e.xtag._skipOuterClick||!e.hasAttribute("visible")||e.hasAttribute("ignore-outer-trigger")||c(t.target,e)||w(e),e.xtag._skipOuterClick=!1})},i=this._cachedListener=new r(document,t,n);i.attachListener()}function o(){this.eventStructDict={}}function a(t,e,n){var i=function(e){n&&c(e.target,t.previousElementSibling)&&n.call(t.previousElementSibling,e)};return new r(document.documentElement,e,i)}function s(t,e,n){var i=e+":delegate(x-tooltip+*)",o=function(e){n&&this===t.nextElementSibling&&n.call(this,e)};return new r(document.documentElement,i,o)}function u(t,e,n,i){if(e===S)return a(t,n,i);if(e===L)return s(t,n,i);var o=n+":delegate("+e+")";return new r(document.documentElement,o,function(e){var n=this;c(n,t)||i.call(n,e)})}function l(t,e,n){var r=[],i=function(){var e=this;t.xtag._skipOuterClick=!0,t.hasAttribute("visible")?e===t.xtag.lastTargetElem?w(t):E(t,e):E(t,e)},o=u(t,e,n,i);return r.push(o),r}function c(t,e){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function d(t){return function(e){var n=this,r=e.relatedTarget||e.toElement;r?c(r,n)||t.call(this,e):t.call(this,e)}}function h(t,e){var n=[];n=e===S?t.previousElementSibling?[t.previousElementSibling]:[]:e===L?t.nextElementSibling?[t.nextElementSibling]:[]:xtag.query(document,e);for(var r=0;r<n.length;){var i=n[r];c(i,t)?n.splice(r,1):r++}return n}function f(t,n){var r=function(t,e,n){return n.left<=t&&t<=n.right&&n.top<=e&&e<=n.bottom},i=e(t),o=e(n),a=function(t,e){return r(t.left,t.top,e)||r(t.right,t.top,e)||r(t.right,t.bottom,e)||r(t.left,t.bottom,e)},s=function(t,e){return t.top<=e.top&&e.bottom<=t.bottom&&e.left<=t.left&&t.right<=e.right};return a(i,o)||a(o,i)||s(i,o)||s(o,i)}function g(t,e,n){var r=n*(Math.PI/180),i=t*Math.sin(r)+e*Math.cos(r),o=t*Math.cos(r)+e*Math.sin(r);return{height:i,width:o}}function p(t,e,n){var r=t;return r=void 0!==e?Math.max(e,r):r,r=void 0!==n?Math.min(n,r):r}function v(t,e){for(var n=t.parentNode,r=n.scrollWidth,i=n.scrollHeight,o=[],a=[],s=0;s<e.length;s++){var u=e[s],l=u.rect;l.left<0||l.top<0||l.right>r||l.bottom>i?a.push(u):o.push(u)}var c=o.length>0?o:a;return c.length>0?c[0].orient:null}function m(t,r,i){var o=e(t),a=e(r);i=i?i:n(r,a);var s=r.clientTop*i.y,u=r.clientLeft*i.x,l=r.scrollTop*i.y,d=r.scrollLeft*i.x,h={top:o.top-a.top-s,left:o.left-a.left-u};return r!==document.body&&c(r,document.body)&&(h.top+=l,h.left+=d),h}function b(t){t.setAttribute("_force-display",!0)}function x(t){t.removeAttribute("_force-display")}function y(e,n){var r=e.xtag.arrowEl,i=[];for(var o in N){r.setAttribute("arrow-direction",N[o]);var a=_(e,n,o);a&&(b(e),f(e,n)||i.push({orient:o,rect:a}),x(e))}var s=v(e,i);return e.setAttribute("_auto-orientation",s),r.setAttribute("arrow-direction",N[s]),t(s)&&s!==o?_(e,n,s):a}function _(r,i,o,a){if(!r.parentNode)return r.left="",r.top="",null;a=void 0===a?0:a;var s=r.xtag.arrowEl;if(!t(o))return y(r,i);var u=r.offsetParent?r.offsetParent:r.parentNode;a||(r.style.top="",r.style.left="",s.style.top="",s.style.left=""),b(r);var l=e(u),c=n(u,l),d=m(i,u,c),h=u.scrollWidth*c.x,f=u.scrollHeight*c.y,v=u.clientWidth*c.x,E=u.clientHeight*c.y,w=e(i),A=w.width,T=w.height,C=e(r),k=n(r,C),N=C.width,S=C.height,L=s.offsetWidth*k.x,O=s.offsetHeight*k.y,M=45,D=g(L,O,M);L=D.width,O=D.height;var I,R,j,F,U={left:d.left+(A-N)/2,top:d.top+(T-S)/2},P=function(t,e){return{left:(A-L)/2+d.left-e,top:(T-O)/2+d.top-t}};if("top"===o)O/=2,I=d.top-S-O,R=U.left,j=f-S-O,F=h-N;else if("bottom"===o)O/=2,I=d.top+T+O,R=U.left,j=f-S,F=h-N;else if("left"===o)L/=2,I=U.top,R=d.left-N-L,j=f-S,F=h-N-L;else{if("right"!==o)throw"invalid orientation "+o;L/=2,I=U.top,R=d.left+A+L,j=f-S,F=h-N}r.noOverflow&&(I=p(I,0,j),R=p(R,0,F));var H,q,V,W=P(I,R);"top"===o||"bottom"===o?(H=p(W.left,0,N-L),q=N,V="left"):(H=p(W.top,0,S-O),q=S,V="top");var z=q?H/q:0;s.style[V]=100*z+"%";var B=E?I/E:0,Y=v?R/v:0;r.style.top=100*B+"%",r.style.left=100*Y+"%";var G=r.offsetWidth*k.x,J=r.offsetHeight*k.y,X=u.clientWidth*c.x,K=u.clientHeight*c.y;x(r);var $=1;return $>a&&(N!==G||S!==J||v!==X||E!==K)?_(r,i,o,a+1):{left:R,top:I,width:G,height:J,right:R+G,bottom:I+J}}function E(t,e){e===t&&console.warn("The tooltip's target element is the tooltip itself! Is this intentional?");var n=t.xtag.arrowEl;n.parentNode||console.warn("The inner component DOM of the tooltip appears to be missing. Make sure to edit tooltip contents through the .contentEl property instead ofdirectly on the x-tooltip to avoid clobbering the component's internals.");var r=t.orientation,i=function(){x(t),t.setAttribute("visible",!0),xtag.fireEvent(t,"tooltipshown",{triggerElem:e})};e?(_(t,e,r),t.xtag.lastTargetElem=e,i()):(t.style.top="",t.style.left="",n.style.top="",n.style.left="",i())}function w(e){t(e.orientation)&&e.removeAttribute("_auto-orientation"),e.hasAttribute("visible")&&(b(e),e.xtag._hideTransitionFlag=!0,e.removeAttribute("visible"))}function A(t){var e=t.xtag.cachedListeners;e.forEach(function(t){t.removeListener()}),t.xtag.cachedListeners=[],C.unregisterTooltip(t.triggerStyle,t)}function T(t,e,n){if(t.parentNode){(void 0===e||null===e)&&(e=t.targetSelector),(void 0===n||null===n)&&(n=t.triggerStyle);var r=h(t,e);-1===r.indexOf(t.xtag.lastTargetElem)&&(t.xtag.lastTargetElem=r.length>0?r[0]:null,_(t,t.xtag.lastTargetElem,t.orientation)),A(t);var i;if(n in k){var o=k[n];i=o(t,e)}else i=l(t,e,n),C.registerTooltip(n,t);i.forEach(function(t){t.attachListener()}),t.xtag.cachedListeners=i,w(t)}}var C,k,N={top:"down",bottom:"up",left:"right",right:"left"},S="_previousSibling",L="_nextSibling";r.prototype.attachListener=function(){this._attachedFn||(this._attachedFn=xtag.addEvent(this.elem,this.eventType,this.listenerFn))},r.prototype.removeListener=function(){this._attachedFn&&(xtag.removeEvent(this.elem,this.eventType,this._attachedFn),this._attachedFn=null)},i.prototype.destroy=function(){this._cachedListener.removeListener(),this._cachedListener=null,this._tooltips=null},i.prototype.containsTooltip=function(t){return-1!==this._tooltips.indexOf(t)},i.prototype.addTooltip=function(t){this.containsTooltip(t)||this._tooltips.push(t)},i.prototype.removeTooltip=function(t){this.containsTooltip(t)&&this._tooltips.splice(this._tooltips.indexOf(t),1)},Object.defineProperties(i.prototype,{numTooltips:{get:function(){return this._tooltips.length}}}),o.prototype.registerTooltip=function(t,e){if(t in this.eventStructDict){var n=this.eventStructDict[t];n.containsTooltip(e)||n.addTooltip(e)}else this.eventStructDict[t]=new i(t),this.eventStructDict[t].addTooltip(e)},o.prototype.unregisterTooltip=function(t,e){if(t in this.eventStructDict&&this.eventStructDict[t].containsTooltip(e)){var n=this.eventStructDict[t];n.removeTooltip(e),0===n.numTooltips&&(n.destroy(),delete this.eventStructDict[t])}},C=new o,k={custom:function(){return[]},hover:function(t,e){var n=[],i=null,o=200,a=function(){i&&window.clearTimeout(i),i=null},s=d(function(e){a();var n=this,r=e.relatedTarget||e.toElement;c(r,t)||E(t,n)}),l=d(function(e){a();var n=e.relatedTarget||e.toElement;c(n,t)||(i=window.setTimeout(function(){"hover"===t.triggerStyle&&w(t)},o))}),h=u(t,e,"enter",s),f=u(t,e,"leave",l);n.push(h),n.push(f);var g=d(function(e){a();var n=e.relatedTarget||e.toElement,r=t.xtag.lastTargetElem;t.hasAttribute("visible")||!r||c(n,r)||E(t,r)}),p=d(function(e){a();var n=e.relatedTarget||e.toElement,r=t.xtag.lastTargetElem;r&&!c(n,r)&&(i=window.setTimeout(function(){"hover"===t.triggerStyle&&w(t)},o))});return n.push(new r(t,"enter",g)),n.push(new r(t,"leave",p)),n}},xtag.register("x-tooltip",{lifecycle:{created:function(){var t=this;t.xtag.contentEl=document.createElement("div"),t.xtag.arrowEl=document.createElement("span"),xtag.addClass(t.xtag.contentEl,"tooltip-content"),xtag.addClass(t.xtag.arrowEl,"tooltip-arrow"),t.xtag.contentEl.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(t.xtag.contentEl),t.appendChild(t.xtag.arrowEl),t.xtag._orientation="auto",t.xtag._targetSelector=S,t.xtag._triggerStyle="hover";var e=h(t,t.xtag._targetSelector);t.xtag.lastTargetElem=e.length>0?e[0]:null,t.xtag.cachedListeners=[],t.xtag._hideTransitionFlag=!1,t.xtag._skipOuterClick=!1},inserted:function(){T(this,this.xtag._targetSelector,this.xtag._triggerStyle)},removed:function(){A(this)}},events:{transitionend:function(t){var e=t.currentTarget;e.xtag._hideTransitionFlag&&!e.hasAttribute("visible")&&(e.xtag._hideTransitionFlag=!1,xtag.fireEvent(e,"tooltiphidden")),x(e)}},accessors:{orientation:{attribute:{},get:function(){return this.xtag._orientation},set:function(e){e=e.toLowerCase();var n=this.querySelector(".tooltip-arrow"),r=null;t(e)?(r=N[e],n.setAttribute("arrow-direction",r),this.removeAttribute("_auto-orientation")):n.removeAttribute("arrow-direction"),this.xtag._orientation=e,this.refreshPosition()}},triggerStyle:{attribute:{name:"trigger-style"},get:function(){return this.xtag._triggerStyle},set:function(t){T(this,this.targetSelector,t),this.xtag._triggerStyle=t}},targetSelector:{attribute:{name:"target-selector"},get:function(){return this.xtag._targetSelector},set:function(t){h(this,t),T(this,t,this.triggerStyle),this.xtag._targetSelector=t}},ignoreOuterTrigger:{attribute:{"boolean":!0,name:"ignore-outer-trigger"}},ignoreTooltipPointerEvents:{attribute:{"boolean":!0,name:"ignore-tooltip-pointer-events"}},noOverflow:{attribute:{"boolean":!0,name:"no-overflow"},set:function(){this.refreshPosition()}},contentEl:{get:function(){return this.xtag.contentEl},set:function(t){var e=this.xtag.contentEl;xtag.addClass(t,"tooltip-content"),this.replaceChild(t,e),this.xtag.contentEl=t,this.refreshPosition()}},presetTriggerStyles:{get:function(){var t=[];for(var e in k)t.push(e);return t}},targetElems:{get:function(){return h(this,this.targetSelector)}}},methods:{refreshPosition:function(){this.xtag.lastTargetElem&&_(this,this.xtag.lastTargetElem,this.orientation)},show:function(){E(this,this.xtag.lastTargetElem)},hide:function(){w(this)},toggle:function(){this.hasAttribute("visible")?this.hide():this.show()}}})}();